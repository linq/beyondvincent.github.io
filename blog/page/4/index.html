
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>破船之家</title>
	<meta name="author" content="破船(BeyondVincent)">

	
	<meta name="description" content="Jun 13th, 2013 iOS, iOS7新特征 iOS7新特征汇总[03]新特征介绍3 提醒：这里是新特征汇总博文链接：iOS7新特征汇总 小引 上一篇文章（iOS7新特征汇总[02]新特征介绍2）中，笔者介绍了在iOS7中关于游戏、地图和AirDrop相关内容。 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="破船之家" type="application/atom+xml">
	
	<link rel="canonical" href="http://BeyondVincent.github.io/blog/page/4/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='http://www.gravatar.com/avatar/" + MD5("beyondvincent@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
	</script>
</div>
<h1><a href="/">破船之家</a></h1>
<p class="subtitle">宠辱不惊，闲看庭前花开花落<br>去留无意，漫随天外云卷云舒<br>不妄取，不妄予，不妄想，不妄求<br>与人方便，随遇而安</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">所有文章</a></li>
  <li><a href="/about">关于我</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="weibo" href="http://www.weibo.com/beyondvincent" title="Weibo">Weibo</a>
		
		
		
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav></header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-13T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 13<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>, <a class='category' href='/blog/categories/ios7xin-te-zheng/'>iOS7新特征</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/13/86/" itemprop="url">iOS7新特征汇总[03]新特征介绍3</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>提醒：这里是新特征汇总博文链接：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://beyondvincent.com/2013/06/11/ios7%E6%96%B0%E7%89%B9%E5%BE%81%E6%B1%87%E6%80%BB/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总</span></a></strong></span></span></p>

<h2><strong><span style="color: #339966;">小引</span></strong></h2>

<p>上一篇文章（<a href="http://beyondvincent.com/?p=1306" target="_blank"><strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[02]新特征介绍2</span></span></span></strong></a>）中，笔者介绍了在iOS7中关于游戏、地图和AirDrop相关内容。本文将继续介绍iOS7中的新特征：程序间的音频（inter-App Audio）、点对点的连接、新增的Framework。</p>

<h2><strong><span style="color: #339966;">程序间的音频（inter-App Audio）</span></strong></h2>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/InterAppAudio2013.png"><img class="alignnone size-full wp-image-1325" alt="InterAppAudio2013" src="http://beyondvincent.com/wp-content/uploads/2013/06/InterAppAudio2013.png" width="853" height="480" /></a></p>

<p><span style="color: #339966;">Audio Unit framework (AudioUnit.framework)</span>现在支持程序间的音频了——可以在同一台设备上不同的两个程序之间发送MIDI命令和音频流。例如，通过该功能，你可以使用一个程序来录制音乐，然后将录制的音乐音乐发送到另外一个能对音乐进行处理的程序中。</p>

<p>为了公开（vend）你程序中的音频数据，需要发布一个<span style="color: #339966;">AURemoteIO</span>实例来充当音频组件——对其它进程是可见的。在iOS7里面，要在另外一个程序中使用程序间的音频功能，请使用音频组件发现接口。【翻译自苹果官网中的如下内容，还不是太理解具体意思，如果大家知道的话，可以告诉我，谢谢！】</p>

<blockquote><p><em>To vend your app’s audio data, publish a AURemoteIO instance as an audio component that is visible to other processes. to use audio features from another app, use the audio component discovery interface in iOS 7.</em></p></blockquote>

<p>更多相关内容请看：Audio Toolbox Framework Reference</p>

<h2><strong><span style="color: #339966;">点对点的连接</span></strong></h2>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/apple-wwdc-2013-3a.jpg"><img class="alignnone size-full wp-image-1326" alt="apple-wwdc-2013-3a" src="http://beyondvincent.com/wp-content/uploads/2013/06/apple-wwdc-2013-3a.jpg" width="680" height="400" /></a></p>

<p>通过<span style="color: #339966;">Multipeer Connectivity framework (MultipeerConnectivity.framework)</span>可以查找附近的设备，并直接与这些设备进行通讯——不需要通过互联网。该Framework具有这样的特点：很容易的创建多点（multipeer）会话、支持稳定、可靠和实时的数据传输。可以看出，通过该Framework，你的程序可以与附近的设备进行通讯，并做到数据的无缝交换。</p>

<p>该Framework提供了两种方式来查找并管理网络服务：编程方式和基于UI选项。可以使用<span style="color: #339966;">MCNearbyServiceBrowser</span>类以编程的方式查找并管理设备。另外，我们可以将<span style="color: #339966;">MCPeerPickerViewController</span>集成到程序中——用来显示用户可以选择的设备列表。</p>

<p>更多相关信息，请阅读：Multipeer Connectivity Framework Reference</p>

<h2><strong><span style="color: #339966;">新增的Framework</span></strong></h2>

<p>在iOS7中，新增了如下一些Framework：</p>

<ol>
<li>Game Controller framework(<span style="color: #339966;">GameController.framework</span>)：提供了与游戏相关的硬件通讯接口。</li>
<li>Sprite Kit framework(<span style="color: #339966;">SpriteKit.framework</span>)：提供了基于精灵（sprite-based）的动画和图形渲染。</li>
<li>Multipeer Connectivity framework(<span style="color: #339966;">MultipeerConnectivity.framework</span>)：提供设备间点对点通讯的功能。</li>
<li>JavaScript Core framework (<span style="color: #339966;">JavaScriptCore.framework</span>)：提供了用Objective-C封装的大量标准JavaScript对象。通过该framework可以对JavaScript代码进行评估（evaluate），以及解析JSON。</li>
<li>Media Accessibility framework (<span style="color: #339966;">MediaAccessibility.framework</span>)：管理媒体文件中字幕（closed-caption）内容的显示。通过该Framework与settings的结合，可以让用户开启字幕的显示。</li>
<li>Safari Services framework (<span style="color: #339966;">SafariServices.framework</span>)：通过该framework，可以通过编程的方式将URL添加到用户的Safari阅读列表中。</li>
</ol>


<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/QQ20130612-20.png"><img class="alignnone size-full wp-image-1327" alt="QQ20130612-20" src="http://beyondvincent.com/wp-content/uploads/2013/06/QQ20130612-20.png" width="970" height="499" /></a></p>

<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_</p>

<h2><span style="color: #339966;"><strong>强烈推荐</strong></span></h2>

<p>来自唐巧的一个微信公众账号：<span style="color: #339966;">iosDevTips</span>——基本每天都会有关于iOS开发的精彩内容分享。<br/>
来自唐巧的一个Google Group讨论组：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="https://groups.google.com/forum/#!forum/iosdevtips" target="_blank"><span style="color: #339966; text-decoration: underline;">iosDevTips</span></a></span></span></p>

<h2><span style="color: #339966;"><strong>新特征汇总更新通知方式</strong></span></h2>

<p>有新的内容我会通过下面的方式进行通知，欢迎关注：<br/>
新浪微博：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://www.weibo.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></strong></span></span><br/>
腾讯微博：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://t.qq.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></strong></span></span><br/>
微信公众账号：<strong>破船之家</strong><br/>
<a href="http://beyondvincent.com/wp-content/uploads/2013/03/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E8%B4%A6%E5%8F%B7-%E7%A0%B4%E8%88%B9%E4%B9%8B%E5%AE%B6.jpg"><img alt="微信公众账号-破船之家" src="http://beyondvincent.com/wp-content/uploads/2013/03/微信公众账号-破船之家-150x150.jpg" width="150" height="150" /></a></p>

<div>
</div>




<div>
  本文由<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline;">破船</span></a></span></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2013-06-13</time>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-12T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 12<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>, <a class='category' href='/blog/categories/ios7xin-te-zheng/'>iOS7新特征</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/12/85/" itemprop="url">iOS7新特征汇总[02]新特征介绍2</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>提醒：这里是新特征汇总博文链接：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://beyondvincent.com/2013/06/11/ios7%E6%96%B0%E7%89%B9%E5%BE%81%E6%B1%87%E6%80%BB/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总</span></a></strong></span></span></p>

<h2><strong><span style="color: #339966;">小引</span></strong></h2>

<p>上一篇文章（<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://beyondvincent.com/2013/06/11/ios7%E6%96%B0%E7%89%B9%E5%BE%81%E6%B1%87%E6%80%BB01%E6%96%B0%E7%89%B9%E5%BE%81%E4%BB%8B%E7%BB%8D/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[01]新特征介绍1</span></a></span></span></strong>）中，笔者介绍了在iOS7中用户界面的改变和多任务的增强。本文将继续介绍iOS7中的新特征：游戏、地图和AirDrop。</p>

<h2><strong><span style="color: #339966;">游戏</span></strong></h2>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/251.jpg"><img class="alignnone size-full wp-image-1316" alt="25" src="http://beyondvincent.com/wp-content/uploads/2013/06/251.jpg" width="600" height="450" /></a></p>

<p>在iOS7中，苹果加强了对游戏开发的支持。这主要体现在如下三个方面：</p>

<ul>
<li><span style="color: #339966; font-size: 1.17em;">Sprite Kit Framework</span></li>
</ul>


<p>Sprite Kit Framework (SpriteKit.framework)提供了一个优化了的硬件加速动画系统——用于创建2D和2.5D游戏。包括了游戏开发中许多重要的基本内容：图形渲染、动画系统、声音播放，并还有一个物理模拟引擎。通过Sprite Kit Framework可以让开发者把工作重点放在游戏内容的设计和交互上。</p>

<p>Sprite Kit Framework中，内容是以场景（scenes）的形式组织的。一个场景可以包括：纹理对象、视频、基于路径的形状、图片滤镜以及其它有些特殊的效果。Sprite Kit以最有效的方式来决定这些对象在屏幕上的渲染。当需要在场景中对某个对象进行动画时，可以使用Sprite Kit来明确的指定一个动作，或者使用物理模拟引擎给某个对象定义一个物理行为（例如重力、吸附和排斥）。</p>

<p>除了Sprite  Kit Framework，苹果还提供了Xcode工具来创建粒子发射效果和纹理集合。通过Xcode工具可以管理程序的assets，以及快速的更新Sprite Kit场景。</p>

<p>更多关于如何使用Sprite Kit，读者可以参考Sprite Kit Programming Guide。苹果也提供了一个示例演示如何使用Sprite Kit：Explained Adventure(From <span style="text-decoration: underline;"><span style="color: #339966;"><a href="https://developer.apple.com/library/prerelease/ios/samplecode/Adventure/Introduction/Intro.html#//apple_ref/doc/uid/DTS40013420" target="_blank"><span style="color: #339966; text-decoration: underline;">Apple</span></a></span></span>)。</p>

<ul>
<li><span style="color: #339966; font-size: 1.17em;">Game Controller Framework</span></li>
</ul>


<p>Game Controller Framework (GameController.framework)可以让你在程序中发现并对游戏控制器硬件进行配置。通过Game Controller Framework可以让iOS设备通过无线或者蓝牙进行连接。当控制器可用的时候，该Framework会通知你的程序。</p>

<p>更多相关信息可以参考Game Controller Programming Guide。</p>

<ul>
<li><span style="color: #339966; font-size: 1.17em;">Game Center 改进</span></li>
</ul>


<p>在iOS7中，苹果对游戏中心（Game Center）做了如下改进：</p>

<ol>
<li>给玩家提供一个与其它玩家互动的机会，即使目前还没有轮到该玩家。通过该功能，可以实现玩家之间的聊天、交易等（即使没有轮到玩家）。</li>
<li>每个程序的排行榜限制已经从原来的25变为100.通过GKLeaderboardSet对象，可以对你的排行榜进行组织，并把上限增加只500。</li>
<li>在游戏中进行挑战（做任务）的时候，可以为这个挑战添加条件限制。例如，在驾驶游戏中，指定必须使用相同的车辆。</li>
<li>为了防止作弊，增加了认证的支持，以及其它有些功能。</li>
</ol>


<p>更多关于如何使用新的Game Center功能，请参考Game Center Programming Guide 。</p>

<p>关于Game Kit Framework，请参考Game Kit Framework。</p>

<p><strong style="font-size: 1.5em;"><span style="color: #339966;">地图</span></strong></p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/1_image-large.jpg"><img class="alignnone size-full wp-image-1315" alt="1_image-large" src="http://beyondvincent.com/wp-content/uploads/2013/06/1_image-large.jpg" width="650" height="365" /></a></p>

<p>基于地图信息，苹果对Map Kit framework (MapKit.framework)做了大量的改进，并新增了不少功能。使用地图来显示的位置信息现在可以利用3D地图了，可以通过编程的方式来控制地图的视角。Map Kit还做了其它一些重要的改变：</p>

<ol>
<li>图层（Overlay）可以被放置在地图中不同的层中，这样就可以将图层放置在相关数据的上面或者下面。</li>
<li>可以使用<span style="color: #339966;">MKMapCamera</span>对象在地图中增加一个位置、倾斜和航向信息。摄像头信息可以给地图增加3D视图体验。</li>
<li>通过<span style="color: #339966;">MKDirection</span>类可以从苹果那里请求获得方向相关的线路信息。通过获得的线路信息可以创建一个图层并显示到地图中。</li>
<li><span style="color: #339966;">MKGeodesicPolyline</span>类可以参照地球的曲率，创建一个基于线条的图层。</li>
<li>使用<span style="color: #339966;">MKMapSnapshotter</span>类可以捕捉基于地图的图片。</li>
<li>目前可视化的图层是基于<span style="color: #339966;">MKOverlayRenderer</span>的，这取代了之前的图层视图，并提供了一个简单的渲染方法。</li>
<li>可以使用<span style="color: #339966;">MKTileOverlay</span>和<span style="color: #339966;">MKTileOverlayRenderer</span>类来取代地图上已有的大头针（tile）。</li>
</ol>


<p>更多相关信息，请阅读Map Kit Framework Reference 。</p>

<h2><strong><span style="color: #339966;">AirDrop</span></strong></h2>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/ios-7-air-drop.jpg"><img class="alignnone size-full wp-image-1318" alt="ios-7-air-drop" src="http://beyondvincent.com/wp-content/uploads/2013/06/ios-7-air-drop.jpg" width="621" height="565" /></a></p>

<p>通过AirDrop，用户可以给附近的iOS设备分享图片、文档、URL以及其它有些数据。AirDrop支持内置到已有的<span style="color: #339966;">UIActivityViewController</span>中——这个类会根据分享的不同数据显示出不同的选项。苹果建议：如果你的程序中还没有使用这个类，请考虑将其添加到程序中。</p>

<p>更多关于利用activity view controller来访分享数据的信息，请参考UIActivityViewController Class Reference。</p>

<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_</p>

<h2><span style="color: #339966;"><strong>强烈推荐</strong></span></h2>

<p>来自唐巧的一个微信公众账号：iosDevTips——基本每天都会有关于iOS开发的精彩内容分享。<br/>
来自唐巧的一个Google Group讨论组：<span style="text-decoration: underline;"><span style="color: #339966;"><a href="https://groups.google.com/forum/#!forum/iosdevtips" target="_blank"><span style="color: #339966; text-decoration: underline;">iosDevTips</span></a></span></span></p>

<h2><span style="color: #339966;"><strong>新特征汇总更新通知方式</strong></span></h2>

<p>有新的内容我会通过下面的方式进行通知，欢迎关注：<br/>
新浪微博：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://www.weibo.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></strong></span></span><br/>
腾讯微博：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://t.qq.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></strong></span></span><br/>
微信公众账号：<strong>破船之家</strong><br/>
<a href="http://beyondvincent.com/wp-content/uploads/2013/03/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E8%B4%A6%E5%8F%B7-%E7%A0%B4%E8%88%B9%E4%B9%8B%E5%AE%B6.jpg"><img alt="微信公众账号-破船之家" src="http://beyondvincent.com/wp-content/uploads/2013/03/微信公众账号-破船之家-150x150.jpg" width="150" height="150" /></a></p>

<div>
</div>




<div>
  本文由<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline;">破船</span></a></span></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2013-06-12</time>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-11T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 11<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>, <a class='category' href='/blog/categories/ios7xin-te-zheng/'>iOS7新特征</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/11/84/" itemprop="url">iOS7新特征汇总[01]新特征介绍1</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>提醒：这里是新特征汇总博文链接：<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://beyondvincent.com/2013/06/11/ios7%E6%96%B0%E7%89%B9%E5%BE%81%E6%B1%87%E6%80%BB/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总</span></a></span></span></strong></p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/87643583.jpg"><img class="alignnone size-full wp-image-1289" alt="87643583" src="http://beyondvincent.com/wp-content/uploads/2013/06/87643583.jpg" width="550" height="356" /></a></p>

<p>&nbsp;</p>

<h2><strong><span style="color: #339966;">引言</span></strong></h2>

<p>今天（北京时间2013年06月11日）凌晨，由库克引领的苹果发布了iOS7，本次新系统的发布可以说是iOS自发布以来最大的一次变革，iOS的设计由之前的拟物变为了现在的扁平化——这也标志着苹果真正的进入了库克时代。</p>

<p>目前苹果只发布了iOS7的beta版本，虽然据闻有不少bug，不过无论你对iOS7的设计是吐槽也好，惊艳也罢，基调已经定下来了，苹果的这次革新，是否能够获得用户的青睐，就让用户来检验吧。</p>

<p>按照往年的惯例，iOS7的release版本预计会在今年9月份发布，在这差不多3个月的时间里面，苹果的主要任务估计就是完善并加强iOS7的稳定性了。</p>

<p>为了观察开发者对WWDC2013的关注情况，在WWDC开幕的时候，笔者分别在新浪微博和Twitter上检索WWDC关键字，发现相关新讯息更新的速度非常快，从这一个角度来说，无论是国内的开发者，还是国外的开发者，对苹果非常的期待。</p>

<p>虽说iOS和相关设备的每次升级更新，都会引来大批的code monkey吐槽（譬如去年iPhone5的发布），不过吐槽归吐槽，想想社会是进步的，没有大胆的尝试，又哪来进步呢——无论成功与否，苹果这种引领业界创新的精神才应该是值得大家欣赏与效仿的！</p>

<p>好吧，上面说了一大堆内容，貌似与本文主题“iOS新特征”偏离太远，下面我们就来看看iOS7里面的一些新特征：</p>

<h2><span style="color: #339966;">正文</span></h2>

<p>无论是对于开发者或用户来说iOS7都是非常重要的一次更新，iOS7对UI进行了彻底的重新设计。另外为了创建2D和2.5D游戏，iOS7引进了一套全新的动画系统。在iOS7中，多任务的增强、点对点的连接，以及其它一些重要的特征都足以使iOS7意义非凡。</p>

<p>下面我们就来细数一下iOS7的新特征：</p>

<p><span style="color: #339966;">关键字</span>：用户界面的改变、多任务的增强、游戏、地图、AirDrop、应用程序间的音频、点对点的连接、一些新的Framework、已有Framework的增强、OC和弃用的一些API等。</p>

<p>关于本文：新特征介绍1 首先介绍一下iOS7中<strong><span style="color: #339966;">用户界面的改变</span></strong>和<span style="color: #339966;"><strong>多任务的增强</strong></span>。</p>

<h3><span style="font-size: 1.17em; color: #339966;">用户界面的改变</span></h3>

<p>在iOS7整个系统中，每一方面的设计都重点突出功能以及用户的内容——半透明和精致的视觉感受——流畅和逼真的动作——具有清晰、深入和有活力的用户体验。对于开发者来说，无论是创建一个全新的App，或者对已有的程序进行升级更新，在设计的时候，都需要时刻记住这些特点。</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/design_functional_gallery2.jpg"><img class="alignnone size-full wp-image-1291" alt="design_functional_gallery2" src="http://beyondvincent.com/wp-content/uploads/2013/06/design_functional_gallery2.jpg" width="1441" height="621" /></a></p>

<p>&nbsp;</p>

<p>在用户界面设计中，新增了一个重要的概念：<strong><span style="color: #339966;">UIKit动力（UIKit Dynamics）</span></strong>。通过UIKit动力，在我们的程序中可以为UIView对象指定动力行为，以及让别的对象遵循UIDynamicItem协议——（遵循该协议的对象称为动力项[dynamic items]）。动力行为通过将现实世界中的行为和特征与程序相结合（例如将重力加入程序的动画中），以提供一种增强用户体验的方法。UIKit默认支持如下5种动力行为：</p>

<p><strong><span style="color: #339966;">吸附行为（UIAttachmentBehavior）</span></strong>：有一个对象UIAttachmentBehavior，该对象用来指定两个动力项（项或点）之间的连接，当一个项或者点移动时，吸附的项也随之移动。当然，这个连接并不是完全是静态的（static），吸附的项有两个属性<span style="color: #339966;">damping</span>(阻尼)和<span style="color: #339966;">oscillation</span>(震荡)，这两个属性决定了吸附项的行为是如何随时间而变化的。</p>

<p><strong><span style="color: #339966;">碰撞行为（UICollisionBehavior）</span></strong>：通过对象UICollisionBehavior指定一个边界，并且让各个动力项，在该边界内参与碰撞。UICollisionBehavior对象还可以指定这些动力项适当的回应碰撞。</p>

<p><strong><span style="color: #339966;">重力行为（UIGravityBehavior）</span></strong>：通过对象UIGravityBehavior给动力项指定一个重力矢量，具有重力矢量的动力项，会在重力矢量的方向上一直加速，直到与别的动力项产生了冲突或者，遇到了边界。</p>

<p><span style="color: #339966;"><strong>推动行为（UIPushBehavior）</strong></span>：通过对象UIPushBehavior给动力项指定一个持续的或者瞬时的力（force vector）。</p>

<p><strong><span style="color: #339966;">捕捉行为（UISnapBehavior）</span></strong>：通过对象UISnapBehavior给动力项指定一个捕捉点。动力项会根据配置的效果，来抓住这一捕捉点。</p>

<p>当动力行为被添加到animator（UIDynamicAnimator类的实例对象）时，动力行为就被激活。animator为动力行为的执行提供了上下文。动力项可以有多个行为，只不过所有这些行为都必须添加到相同的animator中。</p>

<p>更多关于动力行为的使用，请参考UIKit Framework Reference。</p>

<p>另外还有<span style="color: #339966;"><strong>Text Kit</strong></span>是一个功能齐全、更高级别的Framework——通过该Framework，可以对程序中的文本内容进行精致的排版。Text Kit能够将文本内容按照段落、列和页进行布局。可以很容易的让文本围绕着某个区域进行布局（例如图形），并且可以管理多种字体。值得一提的是，在iOS7中，已经将TextKit整合到所有基于文本的控件中，这样一来，在程序中，对文本的创建、编辑、修改和显示都非常的容易——不像在之前iOS中，需要更多的代码来实现。</p>

<p>关于动力行为和Text Kit，随后，笔者会给出一些示例，敬请关注！</p>

<p>下面我们来看看iOS7中对多任务都做了哪些增强。</p>

<h3><span style="color: #339966;">多任务的增强</span></h3>

<p>iOS7中，应用程序的后台执行模型，新增了如下两种类型：</p>

<ol>
<li><strong><span style="color: #339966;">fetch</span></strong>：如果应用程序需要从网络中有规律的下载新数据，那么现在可以通过向系统注册一下，使新数据的下载操作可以定期的被唤醒或者启动以在后台进行下载。注册方法为：在程序的Info.plist中，将UIBackgroundModes键值设置为fetch，然后在app delegate中，使用方法<strong><span style="color: #339966;">setMinimumBackgroundFetchInterval:</span></strong>来设置下载新数据操作之间的最小时间间隔。另外，必须在app delegate中实现<strong><span style="color: #339966;">application:performFetchWithCompletionHandler:</span></strong>方法以执行任意的下载。</li>
<li><strong><span style="color: #339966;">remote-notifaction</span></strong>：在iOS7之前，程序中使用的推送通知是用来给用户推送新的消息，而有新的消息到达时，如果需要获得消息相关更多内容时，还需要用户启动相应的程序，以在程序中获取新的消息内容，而现在在iOS7中，通过推送通知，可以启动一个后台下载操作任务。要使用这种模型，只需要将程序Info.plist文件中的UIBackgroundModes键值设置为remote-notification，然后在app delegate中实现application:didReceiveRemoteNotification:fetchCompletionHandler: 方法。</li>
</ol>


<p>无论是fetch或remote-notification后台执行模型，在适当的时机，都有可能被启动或者从休眠（suspended）状态转移到后台状态。就拿fetch后台模型来说，系统会根据当前可用的信息来来决定启动或者唤醒程序的最佳时机。例如，当网络条件不错，或者设备已经被唤醒的时候，会启动或唤醒程序以执行程序的fetch后台操作。再来看看remote-notification后台执行模型——当有一条新的推送通知到达设备时（在通知用户之前），程序可以先去下载新的消息内容，当内容都准备好之后，就可以通知用户了——可见，对于remote-notification后台执行模型，可以让用户把注意力都集中在内容上，这也符合本文开头提到的iOS7设计重心。</p>

<p>在程序中，处理后台下载数据时，应用使用<strong><span style="color: #339966;">NSURLSession</span></strong>类。这个类对已有的NSURLConnection类进行了改进——针对初始化和处理NSURLRequest对象，提供了一个简单的、基于任务的接口。单个NSURLSession对象可以初始化多个下载和上传任务，并且通过它的delegate，可以处理来此服务器的任意身份认证请求。</p>

<p>关于多任务的更多内容，在随后的博文中，笔者会进行详细的介绍，读者也可以查阅iOS App Programming Guide中的“App States and Multitasking”。</p>

<p>提醒：本文的内容主要参考苹果官网提供的一份文档：What&#8217;s New in iOS 7（From My <span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="https://github.com/BeyondVincent/iOS7-new-feature/raw/master/doc/WhatsNewIniPhoneOS.pdf" target="_blank"><span style="color: #339966; text-decoration: underline;">GitHub</span></a></span></span>，From <span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="https://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW10" target="_blank"><span style="color: #339966; text-decoration: underline;">Apple</span></a></span></span>），如果你英文好的话，建议你去阅读原文。</p>

<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_</p>

<h2><strong><span style="color: #339966;">强烈推荐</span></strong></h2>

<p>来自唐巧的一个微信公众账号：iosDevTips——基本每天都会有关于iOS开发的精彩内容分享。<br/>
来自唐巧的一个Google Group讨论组：<span style="text-decoration: underline;"><span style="color: #339966;"><a href="https://groups.google.com/forum/#!forum/iosdevtips" target="_blank"><span style="color: #339966; text-decoration: underline;">iosDevTips</span></a></span></span></p>

<h2><strong><span style="color: #339966;">新特征汇总更新通知方式</span></strong></h2>

<p>有新的内容我会通过下面的方式进行通知，欢迎关注：<br/>
新浪微博：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://www.weibo.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></strong></span></span><br/>
腾讯微博：<span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><strong><a href="http://t.qq.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></strong></span></span><br/>
微信公众账号：<strong><span style="color: #339966;">破船之家</span></strong><br/>
<a href="http://beyondvincent.com/wp-content/uploads/2013/03/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E8%B4%A6%E5%8F%B7-%E7%A0%B4%E8%88%B9%E4%B9%8B%E5%AE%B6.jpg"><img alt="微信公众账号-破船之家" src="http://beyondvincent.com/wp-content/uploads/2013/03/微信公众账号-破船之家-150x150.jpg" width="150" height="150" /></a></p>

<div>
</div>




<div>
  本文由<span style="text-decoration: underline;"><span style="color: #339966;"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline;">破船</span></a></span></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2013-06-11</time>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-11T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 11<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>, <a class='category' href='/blog/categories/ios7xin-te-zheng/'>iOS7新特征</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/11/83/" itemprop="url">iOS7新特征汇总—持续更新—最近更新2013-07-15</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/ios7_new_feature_collect1.png"><img class="alignnone size-full wp-image-1280" alt="ios7_new_feature_collect" src="http://beyondvincent.com/wp-content/uploads/2013/06/ios7_new_feature_collect1.png" width="976" height="313" /></a></p>

<p>&nbsp;</p>

<p>苹果于北京时间2013年06月11日凌晨1点召开苹果公司全球开发者大会(WWDC2013)，在本次大会上，苹果推出了全新的iOS7。在接下来的一些岁月里面，我将为大家做一个iOS7新特征汇总，欢迎大家关注！</p>

<h1>新特征目录（持续更新中）：</h1>

<h2> <span style="color: #993366;">新特征简介</span></h2>

<h3><span style="text-decoration: underline;"><span style="color: #339966;"><a title="iOS7新特征汇总[01]新特征介绍1" href="http://beyondvincent.com/2013/06/11/ios7%e6%96%b0%e7%89%b9%e5%be%81%e6%b1%87%e6%80%bb01%e6%96%b0%e7%89%b9%e5%be%81%e4%bb%8b%e7%bb%8d/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[01]新特征介绍1</span></a></span></span></h3>

<h3><span style="text-decoration: underline;"><span style="color: #339966;"><a title="iOS7新特征汇总[02]新特征介绍2" href="http://beyondvincent.com/2013/06/12/ios7%e6%96%b0%e7%89%b9%e5%be%81%e6%b1%87%e6%80%bb02%e6%96%b0%e7%89%b9%e5%be%81%e4%bb%8b%e7%bb%8d2/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[02]新特征介绍2</span></a></span></span></h3>

<h3><span style="text-decoration: underline;"><span style="color: #339966;"><a title="iOS7新特征汇总[03]新特征介绍3" href="http://beyondvincent.com/2013/06/13/ios7%e6%96%b0%e7%89%b9%e5%be%81%e6%b1%87%e6%80%bb02%e6%96%b0%e7%89%b9%e5%be%81%e4%bb%8b%e7%bb%8d3/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[03]新特征介绍3</span></a></span></span></h3>

<h3><span style="text-decoration: underline;"><span style="color: #339966;"><a title="iOS7新特征汇总[03]新特征介绍3" href="http://beyondvincent.com/?p=1339" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[04]新特征介绍4</span></a></span></span></h3>

<h3><span style="text-decoration: underline;"><span style="color: #339966;"><a href="http://onevcat.com/2013/06/developer-should-know-about-ios7/" target="_blank"><span style="color: #339966; text-decoration: underline;">开发者所需要知道的iOS7 SDK新特性</span></a></span></span>（来自大拿<span style="text-decoration: underline;"><span style="color: #339966;"><a href="http://onevcat.com/" target="_blank"><span style="color: #339966; text-decoration: underline;">onevcat</span></a></span></span>的一篇博文）</h3>

<h2><span style="color: #993366;"> UIKit动力</span></h2>

<h3><span style="text-decoration: underline;"><span style="color: #339966;"><a title="iOS7新特征汇总[05]初窥UIKit动力(UIKit Dynamics)" href="http://beyondvincent.com/2013/06/16/ios7%e6%96%b0%e7%89%b9%e5%be%81%e6%b1%87%e6%80%bb05%e5%88%9d%e7%aa%a5uikit%e5%8a%a8%e5%8a%9buikit-dynamics/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[05]初窥UIKit动力(UIKit Dynamics)</span></a></span></span></h3>

<h2><span style="color: #993366;">Cocoa Touch中新增的内容</span></h2>

<h3><span style="text-decoration: underline;"><strong><span style="color: #339966;"><a title="iOS7新特征汇总[06]What’s New in Cocoa Touch" href="http://beyondvincent.com/2013/07/03/whats-new-in-cocoa-touch/"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[06]What’s New in Cocoa Touch学习笔记</span></a></span></strong></span></h3>

<h2><span style="color: #993366;">Xcode 5</span></h2>

<h3><span style="text-decoration: underline; color: #339966;"><strong><a href="http://beyondvincent.com/2013/07/15/ios7%E6%96%B0%E7%89%B9%E5%BE%81%E6%B1%87%E6%80%BB07whats-new-in-xcode-5/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS7新特征汇总[05]Xcode 5中非常期待的6个功能</span></a></strong></span></h3>

<p>&nbsp;</p>

<h2>强烈推荐</h2>

<p>来自唐巧的一个微信公众账号：iosDevTips——基本每天都会有关于iOS开发的精彩内容分享。<br/>
来自唐巧的一个Google Group讨论组：<span style="text-decoration: underline; color: #339966;"><span style="text-decoration: underline;"><span style="text-decoration: underline;"><a href="https://groups.google.com/forum/#!forum/iosdevtips" target="_blank"><span style="color: #339966; text-decoration: underline;">iosDevTips</span></a></span></span><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><br /> </span></span></span></p>

<h2>汇总更新通知方式</h2>

<p>有新的内容我会通过下面的方式进行通知，欢迎关注：<br/>
新浪微博：<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://www.weibo.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></span></span></strong><br/>
腾讯微博：<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://t.qq.com/beyondvincent" target="_blank"><span style="color: #339966; text-decoration: underline;">beyondvincent</span></a></span></span></strong><br/>
微信公众账号：<span style="color: #339966;">破船之家</span><br/>
<a href="http://beyondvincent.com/wp-content/uploads/2013/03/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E8%B4%A6%E5%8F%B7-%E7%A0%B4%E8%88%B9%E4%B9%8B%E5%AE%B6.jpg"><img class="alignnone size-thumbnail wp-image-1258" alt="微信公众账号-破船之家" src="http://beyondvincent.com/wp-content/uploads/2013/03/微信公众账号-破船之家-150x150.jpg" width="150" height="150" /></a></p>

<div style="text-align: left;">
</div>




<div style="text-align: left;">
  <span style="color: #339966;">本文由<span style="text-decoration: underline;"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline;">破船</span></a></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2013-06-13</time></span>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-06T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/step-by-step/'>Step by Step</a>, <a class='category' href='/blog/categories/windowsshang-dian-ying-yong-kai-fa/'>Windows商店应用开发</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/06/82/" itemprop="url">Windows Store App开发[053]使用外部字体</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>小引</h3>

<p>在我们写程序，有时候为了界面文字效果美观好看，需要使用第三方字体，而不是使用系统自带的字体。那么这该如何做呢？本文我就来介绍如何在Windows Store App开发中使用外部字体。</p>

<p>步骤如下：</p>

<h3><a name="t4"></a><a name="t4"></a>1、准备需要使用的字体文件</h3>

<p>我在网上找到了两个字体文件：</p>

<p>ARCADE_R.TTF和博洋规范字3500.TTF</p>

<p>将其下载下来。</p>

<h3><a name="t5"></a><a name="t4"></a>2、新建工程</h3>

<p>使用VS新建一个空白应用程序，命名为BV_UseFont。然后将第一步中下载的文件添加到工程中。在这里我添加到Fonts目录下。如下图：</p>

<p>&#160;</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/123.jpg"><img title="1" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="1" src="http://beyondvincent.com/wp-content/uploads/2013/06/1_thumb19.jpg" width="304" height="300" /></a></p>

<h3>3、使用外部字体</h3>

<p>第二步完成之后，我们就可以在程序中使用添加进来的字体了。
字体的使用方法有两种：</p>

<p>1、在xaml中直接设置</p>

<p>2、在cs代码中进行设置</p>

<p>下面我一一进行介绍</p>

<p>1、在xaml中直接设置：</p>

<p>如下代码：</p>

<p>&#160;</p>

<p><TextBlock Name="fontTest2" FontFamily="Fonts/博洋规范字3500.TTF#HAKUYOGuiFanZi3500" Text="BeyondVincent——博洋规范字3500——xaml设置" FontSize="50" ></TextBlock></p>

<p>&#160;</p>

<p>2、在cs代码中设置：</p>

<p>如下代码：</p>

<p>&#160;</p>

<p>FontFamily fontFamily = new FontFamily(@&ldquo;Fonts/博洋规范字3500.TTF#HAKUYOGuiFanZi3500&rdquo;);</p>

<p>fontTest.FontFamily = fontFamily;</p>

<p>&#160;</p>

<p>其中fontTest为TextBlock控件。</p>

<p>在上面两种设置中注意：</p>

<p>字体文件名#字体名称</p>

<p>其中字体名称查看方法：</p>

<p>双击打开字体文件，如下，有字体名称：</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/217.jpg"><img title="2" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="2" src="http://beyondvincent.com/wp-content/uploads/2013/06/2_thumb16.jpg" width="452" height="217" /></a></p>

<p>下面是运行效果：</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/313.jpg"><img title="3" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="3" src="http://beyondvincent.com/wp-content/uploads/2013/06/3_thumb13.jpg" width="682" height="92" /></a></p>

<p>代码下载</p>

<p><a href="https://github.com/BeyondVincent/WindowsStoreAppStepByStep/tree/master/UseFont" target="_blank"><img src="http://beyondvincent.com/wp-content/uploads/2013/05/code_xaml.png" /></a></p>

<p>&#160;</p>

<div style="text-align: left">
  <span style="color: #339966">本文由<span style="text-decoration: underline"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline">破船</span></a></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2012-06-06</span>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-06T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/step-by-step/'>Step by Step</a>, <a class='category' href='/blog/categories/windowsshang-dian-ying-yong-kai-fa/'>Windows商店应用开发</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/06/81/" itemprop="url">Windows Store App开发[052]变换(Transform)(1)简介</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>小引</h3>

<p>在程序的开发过程中，变换是一个常用的操作，比如图片的缩放、旋转、移动等，都涉及到变换。在接下来的几篇文章中，我将对变换进行详细的介绍，欢迎你的阅读。</p>

<h3><a name="t4"></a>变换简介</h3>

<p>变换在数学上的定义是这样的：</p>

<p>非空集合A到自身的一个映射f：A→A称为集合A的变换。</p>

<p>变换是基于一个数学公式：从一个Point到新的一个Point。如果将某个对象所有的Point都应用到这个公式上，就可以达到移动、缩放、旋转等效果。</p>

<p>在Windows Runtime中，UIElement定义了三个属性来支持变换：</p>

<ol>
<li>RenderTransform——位置变换信息</li>
<li>RenderTransformOrigin——RenderTransform变换的原点信息</li>
<li>Projection——投影效果(三维效果)</li>
</ol>


<p>这些属性是定义在UIElement上的，可知，所有的Element都可以进行变换，例如：Image、TextBlock和Button。如果在Panel的子类(如Grid)上进行变换，那么这个子类所有的children都会同时被变换。</p>

<h3><a name="t5"></a>变换类型</h3>

<p>在Windows Runtime中，变换类型有如下：</p>

<ol>
<li>仿射变换——RenderTransform</li>
<li>非仿射变换——Projection</li>
</ol>


<h4><a name="t6"></a>仿射变换</h4>

<p>仿射变换的继承关系，如下图所示：</p>

<p>&#160;</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/120.jpg"><img title="1" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="1" src="http://beyondvincent.com/wp-content/uploads/2013/06/1_thumb18.jpg" width="412" height="677" /></a></p>

<p>从图中我们可以看到，仿射变换有7种类型（粉色部分），平移、缩放、旋转等，在后续的文章中，我会详细介绍如何使用它们。</p>

<p>粉色部分的排列顺序是按照数学公式复杂度排列的，TranslateTransform最简单，TransformGroup最复杂。</p>

<p>这7个类定义了二维仿射变换，对象变换之后，直线依旧是直线，平行关系也不会发生改变。只不过位置、大小、方向发生改变而已。</p>

<p>前面已经说了RenderTransform是UIElement的属性，它的类型是Transform。所以可以把这7种类型赋值给RenderTransform。</p>

<h4><a name="t7"></a>非仿射变换——Projection</h4>

<p>非仿射变换的继承关系，如下图所示：</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/216.jpg"><img title="2" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="2" src="http://beyondvincent.com/wp-content/uploads/2013/06/2_thumb15.jpg" width="388" height="366" /></a></p>

<p>非仿射变换主要用于三维视觉，在使用的时候，只需要将PlaneProjection或Matrix3DProjection赋值给UIElement的属性Projection即可。</p>

<p>注：在三维空间中，旋转总是基于某个轴（xyz）进行的。</p>

<p>很明显：在这种情况下，对象的平行关系是会改变的。</p>

<p>Projection变换也经常称为模拟3D变换，比如Flip(翻转)。</p>

<p>在后续的文章中，我会对Projection进行详细介绍。</p>

<h3><a name="t8"></a>变换演示</h3>

<p>下面我写了个小示例，来演示一下仿射变换和非仿射变换的效果。</p>

<p>左边是原始效果，中间是以正中心为原点，旋转45度，右边是翻转45度</p>

<p>&#160;</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/312.jpg"><img title="3" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="3" src="http://beyondvincent.com/wp-content/uploads/2013/06/3_thumb12.jpg" width="682" height="386" /></a></p>

<p>最后附上代码，方便大家自行演示效果</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" mc:ignorable="d" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="using:BV_Transform_Introduction" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:class="BV_Transform_Introduction.MainPage"&gt;

    &lt;grid background="Green"&gt;
        &lt;grid.columndefinitions&gt;
            &lt;columndefinition&gt;&lt;/columndefinition&gt;
            &lt;columndefinition&gt;&lt;/columndefinition&gt;
            &lt;columndefinition&gt;&lt;/columndefinition&gt;
        &lt;/grid.columndefinitions&gt;
        &lt;textblock margin="128,76,127,632" fontsize="50" horizontalalignment="Center" grid.row="0" grid.column="0" text="原始效果"&gt;&lt;/textblock&gt;
        &lt;img grid.row="0" grid.column="0" source="1.jpg" /&gt;&lt;/img&gt;
        &lt;textblock margin="128,76,127,632" fontsize="50" horizontalalignment="Center" grid.row="0" grid.column="1" text="旋转效果"&gt;&lt;/textblock&gt;
        &lt;img grid.row="0" grid.column="1" source="1.jpg" /&gt;
            &lt;image.rendertransformorigin&gt;0.5 0.5&lt;/image.rendertransformorigin&gt;
            &lt;image.rendertransform&gt;
                &lt;rotatetransform angle="45"&gt;&lt;/rotatetransform&gt;
            &lt;/image.rendertransform&gt;
        &lt;/img&gt;
        &lt;textblock margin="128,76,127,632" fontsize="50" horizontalalignment="Center" grid.row="0" grid.column="2" text="翻转效果"&gt;&lt;/textblock&gt;
        &lt;img grid.row="0" grid.column="2" source="1.jpg" /&gt;
            &lt;image.projection&gt;
                &lt;planeprojection rotationy="60"&gt;&lt;/planeprojection&gt;
            &lt;/image.projection&gt;
        &lt;/img&gt;
        &lt;img width="549" height="92" margin="352,676,0,0" horizontalalignment="Left" grid.column="1" source="BeyondVincentWin8Logo.png" grid.columnspan="2" verticalalignment="Top" /&gt;
    &lt;/grid&gt;
&lt;/page&gt;</pre>


<p>代码下载</p>

<p><a href="https://github.com/BeyondVincent/WindowsStoreAppStepByStep/tree/master/TransformIntroduction" target="_blank"><img src="http://beyondvincent.com/wp-content/uploads/2013/05/code_xaml.png" /></a></p>

<p>&#160;</p>

<div style="text-align: left">
  <span style="color: #339966">本文由<span style="text-decoration: underline"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline">破船</span></a></span>原创●转载请注明出处●<time data-updated="true" datetime="2013-05-18T17:37:00+08:00">2012-06-06</span>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-06T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/step-by-step/'>Step by Step</a>, <a class='category' href='/blog/categories/windowsshang-dian-ying-yong-kai-fa/'>Windows商店应用开发</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/06/80/" itemprop="url">Windows Store App开发[051]数据绑定(3)通知属性改变</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>小引</h3>

<p>当绑定源的某个属性改变了，有时候在绑定目标上需要得到实时更新，比如航班起飞时间延误了，那么需要实时的将此信息告知乘客。本文，我就来介绍一下通知属性改变。</p>

<h3><a name="t4"></a>简介</h3>

<p>属性改变的通知在程序开发过程中非常的实用，用上了该功能，我们就不用自己去改变UI界面更新等操作了。通过绑定引擎可以完成属性改变通知，不过开发者也需要在代码上做一些编写。</p>

<h3><a name="t5"></a>通知属性改变的关键技术</h3>

<p>实现INotifyPropertyChanged接口</p>

<p>发起PropertyChanged事件</p>

<h3><a name="t6"></a>实现步骤</h3>

<p>A、新建空白工程，名称为BV_Binding_INotifyPropertyChanged</p>

<p>B、在项目工程上单击右键，选择添加->选择类->输入People，然后确定</p>

<p>C、在People.cs文件实现INotifyPropertyChanged接口</p>

<p>代码如下：</p>

<p>注：此demo的作用是对年龄属性进行增加，在小于18时，为未成年，否则为成年</p>

<p>在引发PropertyChanged事件时，使用属性名作为参数。如果要想表示所有属性都改变了，那么可以用string.Empty当作参数。在下面的代码中，有具体的演示</p>

<pre class="wp-code-highlight prettyprint linenums:1">using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace BV_Binding_INotifyPropertyChanged
{
    public class People : INotifyPropertyChanged
    {
        private int age = 0;

        private string typeLevel = &quot;未成年&quot;;

        public string TypeLevel
        {
            get { return typeLevel; }
            set
            {
                typeLevel = value;
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public int Age
        {
            get { return age; }
            set
            {
                age = value;
                if (age &lt; 18)
                {
                    TypeLevel = &quot;未成年&quot;;
                }
                else
                { 
                    TypeLevel = &quot;成年&quot;;
                    NotifyPropertyChanged(string.Empty);
                    return;
                }

                NotifyPropertyChanged(&quot;Age&quot;);
            }
        }

        public void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this,
                    new PropertyChangedEventArgs(propertyName));
            }
        }
    }
}</pre>


<p>D、在MainPage.xaml中使用绑定</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="using:BV_Binding_INotifyPropertyChanged" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:class="BV_Binding_INotifyPropertyChanged.MainPage" mc:ignorable="d"&gt;

    &lt;grid background="Green" name="grid"&gt;
        &lt;textblock foreground="White" fontsize="50" text="{Binding Age}" margin="462,193,556,485"&gt;&lt;/textblock&gt;
        &lt;textblock foreground="White" fontsize="50" text="{Binding TypeLevel}" margin="462,288,556,407"&gt;&lt;/textblock&gt;
        &lt;button content="+1" fontsize="50" margin="497,397,0,0" horizontalalignment="Left" height="84" verticalalignment="Top" width="247" click="Button_Click_1"&gt;
    &lt;/grid&gt;
&lt;/page&gt;

&lt;pre&gt;</pre>


<p></p></p>

<div>
</div>




<div>
</div>




<div>
</div>




<div>
</div>




<div>
</div>




<div>
</div>


<p></button></p>

<p>E、MainPage.xaml.cs中设置DataContent，并处理按钮事件</p>

<pre class="wp-code-highlight prettyprint linenums:1">using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

// “空白页”项模板在 http://go.microsoft.com/fwlink/?LinkId=234238 上有介绍

namespace BV_Binding_INotifyPropertyChanged
{
    /// &lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;summary&gt;
    /// 可用于自身或导航至 Frame 内部的空白页。
    /// &lt;/summary&gt;
    public sealed partial class MainPage : Page
    {
        People people = new People();
        public MainPage()
        {
            this.InitializeComponent();

            grid.DataContext = people;
        }

        /// &lt;summary&gt;
        /// 在此页将要在 Frame 中显示时进行调用。
        /// &lt;/summary&gt;
        /// &lt;param name="e" /&gt;描述如何访问此页的事件数据。Parameter
        /// 属性通常用于配置页。&lt;/param&gt;
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            ++people.Age;
        }
    }
}</pre>


<p>F、运行效果</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/311.jpg"><img title="3" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="3" src="http://beyondvincent.com/wp-content/uploads/2013/06/3_thumb11.jpg" width="443" height="398" /></a></p>

<p>代码下载</p>

<p><a href="https://github.com/BeyondVincent/WindowsStoreAppStepByStep/tree/master/BindingINotifyPropertyChanged" target="_blank"><img src="http://beyondvincent.com/wp-content/uploads/2013/05/code_xaml.png" /></a></p>

<p>&#160;</p>

<div style="text-align: left">
  <span style="color: #339966">本文由<span style="text-decoration: underline"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline">破船</span></a></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2012-06-06</span>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-06T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/step-by-step/'>Step by Step</a>, <a class='category' href='/blog/categories/windowsshang-dian-ying-yong-kai-fa/'>Windows商店应用开发</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/06/79/" itemprop="url">Windows Store App开发[050]数据绑定(2)转换器</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>小引</h3>

<p>在数据绑定中，有时候我们要显示的内容跟绑定的源有所不同：比如：考生的分数60分以下为不及格或者糟糕、60-90为及格或还行，90分以上为优秀或非常棒。那么我们就需要对绑定源的数据进行处理。这篇文章，我就来说一说绑定中的转换器——通过转换器可以达到对数据的处理，以显示想要的内容。</p>

<h3><a name="t4"></a>简介</h3>

<p>由于<a href="http://beyondvincent.com/2013/06/06/windows-store-app%E5%BC%80%E5%8F%91049%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A1%E7%BB%91%E5%AE%9A%E6%A8%A1%E5%9E%8B/"><u>上一篇</u></a>文章中我只是介绍了绑定模型，没有对数据绑定进行介绍，那么我们先来看看下面这个图（来自msdn），以便对数据绑定有一个了解：</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/119.jpg"><img title="1" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="1" src="http://beyondvincent.com/wp-content/uploads/2013/06/1_thumb17.jpg" width="591" height="249" /></a></p>

<p>上面这个图描述了数据绑定的如下内容：</p>

<p>A、绑定目标——必须是依赖属性，一般来说，都是在FrameworkElement中。</p>

<p>B、绑定对象——连接绑定源与绑定目标的一个对象，绑定引擎通过绑定对象，对绑定源和绑定目标进行相应的处理</p>

<p>C、绑定源——也就是数据的来源，只要是CLR对象即可，不一定必须是依赖属性</p>

<p>E、转换器——对绑定源与绑定目标的值进行转换的接口</p>

<p>本文就是使用到上面的转换器。</p>

<h3><a name="t5"></a>使用转换器的关键技术</h3>

<p>A、实现IValueConverter接口</p>

<p>B、创建一个转换器，告诉绑定对象使用该转换器</p>

<h3><a name="t6"></a>实现步骤</h3>

<p>A、新建空白工程，名称为BV_Binding_Convert</p>

<p>B、在项目工程上单击右键，选择添加->选择类->输入DataConverter，然后确定</p>

<p>C、在DataConverter.cs文件实现IValueConverter接口</p>

<p>IValueConverter接口需要重写两个函数：</p>

<p>Convert——当数据从数据源传递过来了，绑定引擎会掉用该方法，并将数据返回给绑定目标</p>

<p>ConvertBack——与Convert相反：当数据从绑定目标传递过来了，绑定引擎会掉用该方法，并将数据返回给绑定源</p>

<p>注意：在下面的代码中，我还利用了parameter参数，这是在绑定的时候可以指定的参数。可以在这里做一些判断。我在这里根据这个参数回返回不同的值。</p>

<p>另：在代码中我使用的是默认绑定模型：单向绑定，所以不会用到ConvertBack，我也就没有做具体的实现代码</p>

<pre class="wp-code-highlight prettyprint linenums:1">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.UI.Xaml.Data;

namespace BV_Binding_Convert
{
    // Define the Convert method to change a DateTime object to // a month string.
    public class DataConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, string language)
        {
            string type = parameter.ToString();

            double count = (double)value;
            string temp;
            if (count &lt; 60)
            {
                if (type == &quot;1&quot;)
                    temp = &quot;不及格&quot;;
                else
                    temp = &quot;糟糕&quot;;
            }
            else if (count &gt;= 60 &amp;&amp; count &lt;= 90)
            {
                if (type == &quot;1&quot;)
                    temp = &quot;及格&quot;;
                else
                    temp = &quot;还行&quot;;
            }
            else
            {
                if (type == &quot;1&quot;)
                    temp = &quot;优秀&quot;;
                else
                    temp = &quot;非常棒&quot;;
            }

            return temp;
        }

        public object ConvertBack(object value, Type targetType, object parameter, string language)
        {
            throw new NotImplementedException();
        }
    }
}</pre>


<p>D、在xaml中使用绑定</p>

<p>我定义了一个Slider控件——当作绑定源</p>

<p>3个TextBlock当作绑定目标：1个是没有使用转换器，另外两个使用转换器，并携带了不同的参数。</p>

<p>具体代码如下：</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" mc:ignorable="d" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="using:BV_Binding_Convert" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:class="BV_Binding_Convert.MainPage"&gt;

    &lt;page.resources&gt;
        &lt;local:dataconverter x:key="DataConverter1" /&gt;
    &lt;/page.resources&gt;

    &lt;!--LayoutRoot 是包含所有页面内容的根网格--&gt;
    &lt;grid background="Transparent" x:name="LayoutRoot"&gt;

        &lt;!--ContentPanel - 在此处放置其他内容--&gt;
        &lt;grid background="Green"&gt;
            &lt;slider margin="326,220,352,149" maximum="100" value="60" foreground="Red" name="slider"&gt;&lt;/slider&gt;
            &lt;textblock margin="554,286,542,254" text="{Binding ElementName=slider, Path=Value}" fontsize="50"&gt;&lt;/textblock&gt;
            &lt;textblock margin="554,366,542,174" text="{Binding ElementName=slider, Path=Value, Converter={StaticResource DataConverter1}, ConverterParameter=&#39;1&#39;}" fontsize="60"&gt;&lt;/textblock&gt;
            &lt;textblock margin="554,451,614,89" text="{Binding ElementName=slider, Path=Value, Converter={StaticResource DataConverter1}, ConverterParameter=&#39;2&#39;}" fontsize="60"&gt;&lt;/textblock&gt;
        &lt;/grid&gt;
    &lt;/grid&gt;
&lt;/page&gt;</pre>


<p>E、运行效果</p>

<p>用鼠标滑动Slider控件，则绑定目标会根据Slider不同的值进行改变更新。</p>

<p>&#160;</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/215.jpg"><img title="2" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="2" src="http://beyondvincent.com/wp-content/uploads/2013/06/2_thumb14.jpg" width="682" height="329" /></a></p>

<p>代码下载</p>

<p><a href="https://github.com/BeyondVincent/WindowsStoreAppStepByStep/tree/master/BindingConvert" target="_blank"><img src="http://beyondvincent.com/wp-content/uploads/2013/05/code_xaml.png" /></a></p>

<p>&#160;</p>

<div style="text-align: left">
  <span style="color: #339966">本文由<span style="text-decoration: underline"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline">破船</span></a></span>原创●转载请注明出处●<time data-updated="true" datetime="2013-05-18T17:37:00+08:00">2012-06-06</span>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-06T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/step-by-step/'>Step by Step</a>, <a class='category' href='/blog/categories/windowsshang-dian-ying-yong-kai-fa/'>Windows商店应用开发</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/06/78/" itemprop="url">Windows Store App开发[049]数据绑定(1)绑定模型</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>在Windows Store app开发中，数据绑定非常的重要，它提供了一个简单的方法，使我们的程序可以很方便的显示数据并与数据进行交互。今天我先给大家简单的介绍一下Windows Store app中的数据绑定，在后面的文章中，我会展开详细的介绍。</h3>

<h3><a name="t4"></a>简介</h3>

<p>数据绑定在UI控件中显示数据是非常重要的一部分内容。当任意一个UI控件使用了绑定，那么它将会显示出相应的数据。当然，很重要的一个因素就是当绑定的数据发生了改变，此时UI控件显示的内容就会自动的改变。同样，当用户在UI控件上做了改变，这些变动的数据也会被自动保存到数据对象中。</p>

<p>在数据绑定中，每一个绑定都有一个Mode属性，该属性决定了数据流是如何走向的。在Windows Store Apps中，如果使用XAML和C#开发，有3中Mode可以使用：</p>

<p>OneWay绑定</p>

<p>TwoWay绑定</p>

<p>Onetime绑定</p>

<h3><a name="t5"></a>OneWay</h3>

<p>这是默认的绑定模型。OneWay绑定中，数据流的走向是从绑定源流向绑定目标的，不能反过来。当绑定源的数据发生了改变，那么绑定目标会得到更新。</p>

<p>示例：TextBox的Background为绑定目标，ListBox的SelectedItem.Content为绑定源</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;grid background="BurlyWood"&gt;

    &lt;grid height="150" width="165"&gt;

        &lt;textbox background="{Binding ElementName=listBox, Path=SelectedItem.Content, Mode=OneWay}" height="82" fontsize="30" name="textBox" margin="0,-117,-218,0" verticalalignment="Top" foreground="Red" text="OneWay绑定模式"&gt;

        &lt;/textbox&gt;

        &lt;listbox fontsize="30" name="listBox" margin="0,0,-218,-70"&gt;

            &lt;listboxitem content="Green" /&gt;

            &lt;listboxitem content="Blue" isselected="True" /&gt;

            &lt;listboxitem content="Orange" /&gt;

        &lt;/listbox&gt;

    &lt;/grid&gt;

&lt;/grid&gt;</pre>


<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/118.jpg"><img title="1" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="1" src="http://beyondvincent.com/wp-content/uploads/2013/06/1_thumb16.jpg" width="546" height="420" /></a></p>

<h3>TwoWay</h3>

<p>就如名字一样，TwoWay绑定模式可以在绑定源于绑定目标之间相互同步数据。也就是说，无论是绑定源还是绑定目标，谁的数据改变了，另外一方的数据也会得到更新。</p>

<p>示例：</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;grid background="Green"&gt;

    &lt;grid height="180" width="165"&gt;

        &lt;textbox height="56" fontsize="30" name="textBox" margin="0,-101,-192,0" verticalalignment="Top" text="{Binding ElementName=listBox,&#13;&#10;&#13;&#10;                    Path=SelectedItem.Content,&#13;&#10;&#13;&#10;                    Mode=TwoWay}"&gt;

        &lt;/textbox&gt;

        &lt;listbox fontsize="30" name="listBox" margin="0,0,-192,-62"&gt;

            &lt;listboxitem content="破船" /&gt;

            &lt;listboxitem content="BeyondVincent" /&gt;

            &lt;listboxitem content="小破船" /&gt;

            &lt;listboxitem content="小BeyondVincent" /&gt;

        &lt;/listbox&gt;

    &lt;/grid&gt;

&lt;/grid&gt;</pre>


<p>当选择ListBox中的数据时，TextBox中的内容也会跟着改变</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/214.jpg"><img title="2" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="2" src="http://beyondvincent.com/wp-content/uploads/2013/06/2_thumb13.jpg" width="510" height="451" /></a></p>

<p>当在TextBox中修改文本内容，ListBox中对应选中项也会改变[注意，TextBox需要失去Focus，才会触发数据改变]</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/310.jpg"><img title="3" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="3" src="http://beyondvincent.com/wp-content/uploads/2013/06/3_thumb10.jpg" width="553" height="456" /></a></p>

<h3>OneTime</h3>

<p>OneTime绑定模式，数据流是从绑定源到绑定目标的，并且只有一次。当绑定源的数据第一次发生改变时，绑定目标会得到更新。以后绑定源再怎么改变，绑定目标都不会更新。当需要查看数据首次加载情况时，可以选择这种模式。</p>

<p>示例：</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;grid background="Green"&gt;

    &lt;stackpanel verticalalignment="Center" orientation="Vertical"&gt;

        &lt;slider background="Wheat" margin="593,0,354,0" value="50" maximum="100" minimum="1" x:name="sliderOneTimeDataSource" /&gt;

        &lt;textbox height="86" text="{Binding ElementName=sliderOneTimeDataSource, Path=Value, Mode=OneTime}" margin="608,0,354,0" fontsize="50" x:name="tbOneTimeDataBound" /&gt;

    &lt;/stackpanel&gt;

&lt;/grid&gt;</pre>


<p>当源数据确定后，绑定就已经完成了。所以之后Slider再怎么改变数据，都不会影响到TextBox的内容。</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/410.jpg"><img title="4" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="4" src="http://beyondvincent.com/wp-content/uploads/2013/06/4_thumb10.jpg" width="531" height="273" /></a></p>

<p>代码下载</p>

<p><a href="https://github.com/BeyondVincent/WindowsStoreAppStepByStep/tree/master/BindingMode" target="_blank"><img src="http://beyondvincent.com/wp-content/uploads/2013/05/code_xaml.png" /></a></p>

<p>&#160;</p>

<div style="text-align: left">
  <span style="color: #339966">本文由<span style="text-decoration: underline"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline">破船</span></a></span>原创●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2012-06-06</span>
</div>




		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-06-06T00:00:00+08:00" data-updated="true" itemprop="datePublished">Jun 6<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/step-by-step/'>Step by Step</a>, <a class='category' href='/blog/categories/windowsshang-dian-ying-yong-kai-fa/'>Windows商店应用开发</a>


</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2013/06/06/77/" itemprop="url">Windows Store App开发[048]模仿开始屏幕中磁贴的按下、移动效果</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>小引</h3>

<p>在Windows 8的开始屏幕上全是一些方块，当我们用鼠标或者手去触摸时，会有不同的按下倾斜效果，移动的时候也会有放大+半透明的效果。这效果非常的cool。那么这篇博文，我就在自定义一下Button，让其具有类似的效果（Tile内容更新的效果不在此范围，或许在以后的文章中我会写，此文只讨论按下、移动效果）。</p>

<p>注：我在这里称这样的按钮为TileButton</p>

<h3><a name="t4"></a>自定义TileButton的关键技术</h3>

<p>A、继承自Button，这样会方便很多，只需要做极少部分的处理</p>

<p>B、截获按下事件，首先分析按下位置，然后根据位置做不同的效果</p>

<p>C、移动过程中，对按钮做放大和半透明处理，增加用户体验</p>

<h3><a name="t5"></a>制作步骤</h3>

<p>1、新建空白工程，名称为BV_TileButton</p>

<p>2、在项目工程上单击右键，选择添加->选择类->输入BV_TileButton，然后确定</p>

<p>&#160;</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/117.jpg"><img title="1" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; display: inline; border-top-width: 0px" border="0" alt="1" src="http://beyondvincent.com/wp-content/uploads/2013/06/1_thumb15.jpg" width="682" height="415" /></a></p>

<p>3、打开BV_TileButton.cs文件：</p>

<p>里面的内容如下：</p>

<pre class="wp-code-highlight prettyprint linenums:1">/*
* ==============================================================================
* Filename: BV_TileButton.cs
 * 
* Description: 
* TileButton实现了按下、拖动等效果，有点类似开始屏幕那些磁贴的按下、拖动效果、还支持缩放、旋转等。
 * 还存在的问题：在边界按下时，进行拖动没有效果，暂时不知道如何处理
 * 
* Version: 1.0
* Created: 2012/11/15 21:32:23
*
* Author: BeyondVincent(破船)
* http://weibo.com/beyondvincent
* qq:77973689
* ==============================================================================
*/

using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.Foundation;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;

namespace BV_TileButton
{
    class BV_TileButton : Button
    {
        // 翻转效果
        PlaneProjection projection;

        // 移动、缩放、旋转等转换
        CompositeTransform transform;

        // 按下时，倾斜的角度
        int angle = 10;

        // 拖动多远时，开始移动空间
        double dragoffx = 5;
        double dragoffy = 5;

        // 构造函数 做一些初始化工作
        public BV_TileButton()
        {
            projection = new PlaneProjection();
            Projection = projection;
            transform = new CompositeTransform();
            RenderTransform = transform;

            ManipulationMode = ManipulationModes.Rotate | ManipulationModes.Scale | ManipulationModes.TranslateX | ManipulationModes.TranslateY;
        }

        /*
         * 按下时的事件处理，两个步骤
         * 1、首先判断当前按下去的位置在控件的那个区域（控件共分为9个区域，详见PressPointLocation定义）
         * 2、根据按下去的位置，对控件做不同的效果
         */
        protected override void OnPointerPressed(Windows.UI.Xaml.Input.PointerRoutedEventArgs e)
        {
            // 获得当前区域位置
            PressPointLocation location = GetPointLocation(e.GetCurrentPoint(this).Position);


            // 开始对控件做效果处理

            
            if (location == (PressPointLocation.Left | PressPointLocation.YCenter))
            {// 左中
                projection.RotationY = angle;
                projection.CenterOfRotationX = 1;
            }
            else if (location == (PressPointLocation.Left | PressPointLocation.Top))
            {// 左上
                projection.RotationX = -angle;
                projection.RotationY = angle;
                projection.CenterOfRotationX = 1;
                projection.CenterOfRotationY = 1;

            }
            else if (location == (PressPointLocation.Top | PressPointLocation.XCenter))
            {// 上中
                projection.RotationX = -angle * 2;
                projection.CenterOfRotationY = 1;
            }
            else if (location == (PressPointLocation.Right | PressPointLocation.Top))
            {// 右上
                projection.RotationY = projection.RotationX = -angle;
                projection.CenterOfRotationX = 0;
                projection.CenterOfRotationY = 1;
            }
            else if (location == (PressPointLocation.Right | PressPointLocation.YCenter))
            {// 右中
                projection.RotationY = -angle;
                projection.CenterOfRotationX = 0;
            }
            else if (location == (PressPointLocation.Right | PressPointLocation.Bottom))
            {// 右下
                projection.RotationX = angle;
                projection.RotationY = -angle;

                projection.CenterOfRotationX = 0;
                projection.CenterOfRotationY = 0;
            }
            else if (location == (PressPointLocation.Bottom | PressPointLocation.XCenter))
            {// 下中
                projection.RotationX = angle * 2;

                projection.CenterOfRotationY = 0;
            }
            else if (location == (PressPointLocation.Left | PressPointLocation.Bottom))
            {// 左下
                projection.RotationY = projection.RotationX = angle;

                projection.CenterOfRotationX = 1;
                projection.CenterOfRotationY = 1;
            }
            else if (location == (PressPointLocation.XCenter | PressPointLocation.YCenter))
            {// 正中
                CompositeTransform transform = RenderTransform as CompositeTransform;

                transform.CenterX = ActualWidth/2;
                transform.CenterY = ActualHeight/2;
                transform.ScaleX = 0.9;
                transform.ScaleY = 0.9;
            }
        }

        /*
         * 按下放开时的事件处理
         * 主要是做一些还原处理（旋转角度归零、缩放还原、透明度设置等）
         */
        protected override void OnPointerReleased(Windows.UI.Xaml.Input.PointerRoutedEventArgs e)
        {
            projection.RotationX = 0;
            projection.RotationY = 0;

            CompositeTransform transform = RenderTransform as CompositeTransform;

            transform.CenterX = ActualWidth / 2;
            transform.CenterY = ActualHeight / 2;
            transform.ScaleX = 1;
            transform.ScaleY = 1;

            Opacity = 1;

            dragoffx = 0;
            dragoffy = 0;
        }

        /*
         * 有移动等操作时的事件处理
         * 主要包括移动、放大、透明等
         */
        protected override void OnManipulationDelta(ManipulationDeltaRoutedEventArgs e)
        {
            dragoffx += e.Delta.Translation.X;
            dragoffy += e.Delta.Translation.Y;

            if (-10 &lt;= dragoffx &amp;&amp; dragoffx &lt;= 10 &amp;&amp; -10 &lt;= dragoffy &amp;&amp; dragoffy &lt;= 10)
                return;

            transform.CenterX = ActualWidth / 2;
            transform.CenterY = ActualHeight / 2;
            transform.ScaleX = 1.1;
            transform.ScaleY = 1.1;

            Opacity = 0.5;

            projection.RotationX = 0;
            projection.RotationY = 0;

            transform.TranslateX += e.Delta.Translation.X;
            transform.TranslateY += e.Delta.Translation.Y;

            transform.ScaleX *= e.Delta.Scale;
            transform.ScaleY *= e.Delta.Scale;

            transform.Rotation += e.Delta.Rotation;

            base.OnManipulationDelta(e);
        }

        /*
         * 获取控件所在的区域算法
         */
        PressPointLocation GetPointLocation(Point point)
        {
            PressPointLocation location = PressPointLocation.None;

            double tempwidth = ActualWidth / 3;
            if (point.X &lt; tempwidth)
            {
                location |= PressPointLocation.Left;
            }
            else if (point.X &gt; tempwidth * 2)
            {
                location |= PressPointLocation.Right;
            }
            else
            {
                location |= PressPointLocation.XCenter;
            }

            double tempheight = ActualHeight / 3;
            if (point.Y &lt; tempheight)
            {
                location |= PressPointLocation.Top;
            }
            else if (point.Y &gt; tempheight * 2)
            {
                location |= PressPointLocation.Bottom;
            }
            else
            {
                location |= PressPointLocation.YCenter;
            }
            Debug.WriteLine(location.ToString());
            return location;
        }
    }

    public enum PressPointLocation
    {
        None = 0,
        Left = 1,
        Top = 2,
        Right = 4,
        Bottom = 8,
        XCenter = 16,
        YCenter = 32
    }

    /*
         * 获取指定控件的Rect
         */
    public static class BV_ToolAPI
    {
        public static Rect GetElementRect(this FrameworkElement element)
        {
            GeneralTransform buttonTransform = element.TransformToVisual(null);
            Point point = buttonTransform.TransformPoint(new Point());
            return new Rect(point, new Size(element.ActualWidth, element.ActualHeight));
        }
    }
}</pre>


<p>代码有详细注释，在此不过多讲解。</p>

<p>4、在MainPage.xaml文件中，添加如下代码：</p>

<p>注意：其中3行3列的girid控件是为了演示效果，为控件划分不同的区域。在实际开发中，不需要。</p>

<pre class="wp-code-highlight prettyprint linenums:1">&lt;?XML:NAMESPACE PREFIX = &quot;[default] http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; NS = &quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot; /&gt;&lt;page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" mc:ignorable="d" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="using:BV_TileButton" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:class="BV_TileButton.MainPage"&gt;

    &lt;grid background="Green"&gt;
        &lt;local:bv_tilebutton width="310" verticalalignment="Center" height="150" horizontalalignment="Center"&gt;
            &lt;local:bv_tilebutton.content&gt;
                &lt;grid margin="0 0 0 0"&gt;
                   
                    &lt;img margin="-15,-9,-16,-10" source="Assets/widelogo.png" /&gt;
                    &lt;img margin="-19,94,234,-6" source="Assets/logo.png" /&gt;
                    &lt;textblock margin="244,90,0,0" foreground="Red" fontsize="30" text="5"&gt;&lt;/textblock&gt;
                    &lt;textblock margin="7,20,10,72" foreground="Magenta" fontsize="25" text="读书的女孩子，很好噢" fontfamily="宋体"&gt;&lt;/textblock&gt;
                    &lt;grid margin="-15,-9,-16,-10" visibility="Visible"&gt;
                        &lt;grid.columndefinitions&gt;
                            &lt;columndefinition&gt;&lt;/columndefinition&gt;
                            &lt;columndefinition&gt;&lt;/columndefinition&gt;
                            &lt;columndefinition&gt;&lt;/columndefinition&gt;
                        &lt;/grid.columndefinitions&gt;
                        &lt;grid.rowdefinitions&gt;
                            &lt;rowdefinition&gt;&lt;/rowdefinition&gt;
                            &lt;rowdefinition&gt;&lt;/rowdefinition&gt;
                            &lt;rowdefinition&gt;&lt;/rowdefinition&gt;
                        &lt;/grid.rowdefinitions&gt;
                        &lt;border grid.row="0" grid.column="0" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="1" grid.column="0" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="2" grid.column="0" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="0" grid.column="1" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="1" grid.column="1" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="2" grid.column="1" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="0" grid.column="2" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="1" grid.column="2" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                        &lt;border grid.row="2" grid.column="2" borderbrush="Red" borderthickness="1"&gt;&lt;/border&gt;
                    &lt;/grid&gt;
                &lt;/grid&gt;
            &lt;/local:bv_tilebutton.content&gt;
        &lt;/local:bv_tilebutton&gt;
    &lt;/grid&gt;
&lt;/page&gt;</pre>


<p>5、运行效果展示：</p>

<p><a href="http://beyondvincent.com/wp-content/uploads/2013/06/213.jpg"><img title="2" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="2" src="http://beyondvincent.com/wp-content/uploads/2013/06/2_thumb12.jpg" width="402" height="232" /></a> <a href="http://beyondvincent.com/wp-content/uploads/2013/06/39.jpg"><img title="3" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="3" src="http://beyondvincent.com/wp-content/uploads/2013/06/3_thumb9.jpg" width="390" height="220" /></a> <a href="http://beyondvincent.com/wp-content/uploads/2013/06/49.jpg"><img title="4" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="4" src="http://beyondvincent.com/wp-content/uploads/2013/06/4_thumb9.jpg" width="424" height="247" /></a> </p></p>

<p>代码下载</p>

<p><a href="https://github.com/BeyondVincent/WindowsStoreAppStepByStep/tree/master/TileButton" target="_blank"><img src="http://beyondvincent.com/wp-content/uploads/2013/05/code_xaml.png" /></a></p>

<p>&#160;</p>

<div style="text-align: left">
  <span style="color: #339966">本文由<span style="text-decoration: underline"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline">破船</span></a></span>原创●转载请注明出处●<time data-updated="true" datetime="2013-05-18T17:37:00+08:00">2012-06-06</span>
</div>




		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
        <a href="/blog/page/3/" class="prev">Prev</a>
    
    
        <a href="/blog/page/5/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">所有文章</a></div>
    
    <script type="text/javascript">
var duoshuoQuery = {short_name:"beyondvincent"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
</nav>

</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2013 - 破船(BeyondVincent) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'beyondvincent001';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42893468-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>





<script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1a3c98825a726bfbf68a83ba97e0b9be' type='text/javascript'%3E%3C/script%3E"));
    </script>

		</div>
	</div>
</body>
</html>
