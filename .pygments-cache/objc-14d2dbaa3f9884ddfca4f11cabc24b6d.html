<div class="highlight"><pre><span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">useLiveCamera</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="n">UIImagePickerController</span> <span class="nl">isSourceTypeAvailable:</span> <span class="n">UIImagePickerControllerSourceTypeCamera</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">UIAlertView</span> <span class="o">*</span><span class="n">alert</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle:</span><span class="s">@&quot;No camera detected&quot;</span> 
                                                        <span class="nl">message:</span><span class="s">@&quot;The current device has no camera&quot;</span> 
                                                       <span class="nl">delegate:</span><span class="n">self</span> 
                                              <span class="nl">cancelButtonTitle:</span><span class="s">@&quot;Ok&quot;</span> 
                                              <span class="nl">otherButtonTitles:</span><span class="nb">nil</span><span class="p">];</span>
        <span class="p">[</span><span class="n">alert</span> <span class="n">show</span><span class="p">];</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
 
    <span class="n">_liveVideo</span> <span class="o">=</span> <span class="p">[[</span><span class="n">GPUImageVideoCamera</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithSessionPreset:</span><span class="n">AVCaptureSessionPreset1280x720</span>
                                                     <span class="nl">cameraPosition:</span><span class="n">AVCaptureDevicePositionBack</span><span class="p">];</span>
    <span class="n">_liveVideo</span><span class="p">.</span><span class="n">outputImageOrientation</span> <span class="o">=</span> <span class="n">UIInterfaceOrientationLandscapeLeft</span><span class="p">;</span>
 
    <span class="p">[</span><span class="n">_liveVideo</span> <span class="nl">addTarget:</span><span class="n">_videoBuffer</span><span class="p">];</span>           <span class="c1">//Update this</span>
    <span class="p">[</span><span class="n">_videoBuffer</span> <span class="nl">addTarget:</span><span class="n">_backgroundImageView</span><span class="p">];</span> <span class="c1">//Add this</span>
    <span class="p">[</span><span class="n">_videoBuffer</span> <span class="nl">addTarget:</span><span class="n">_blurFilter</span><span class="p">];</span>          <span class="c1">//And this</span>
    <span class="p">[</span><span class="n">_blurFilter</span> <span class="nl">addTarget:</span><span class="n">_recordView</span><span class="p">];</span>           <span class="c1">//And finally this</span>
 
    <span class="p">[</span><span class="n">_liveVideo</span> <span class="n">startCameraCapture</span><span class="p">];</span>
 
    <span class="n">_recordView</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
    <span class="n">_controlView</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>